# Milestone v1.0: MVP

**Status:** SHIPPED 2026-02-01
**Phases:** 1-7
**Total Plans:** 33

## Overview

QtMCP is built foundation-first: establish injection and transport (highest technical risk on Windows), then build introspection layers (Object Registry, Signals, UI), then expose three API modes (Native, Computer Use, Chrome), then add extended introspection (QML, Model/View), and finally wrap with Python MCP server and client library. This order follows technical dependencies and front-loads risk.

## Phases

### Phase 1: Foundation
**Goal**: Probe can be injected into any Qt application and accepts WebSocket connections
**Depends on**: Nothing (first phase)
**Plans**: 6 plans

Plans:
- [x] 01-01: CMake build system and project structure
- [x] 01-02: Probe singleton with safe platform initialization
- [x] 01-03: JSON-RPC 2.0 handler with unit tests
- [x] 01-04: WebSocket server with single-client logic
- [x] 01-05: Launcher CLI with platform injection
- [x] 01-06: Test app and end-to-end verification

**Completed:** 2026-01-30

### Phase 2: Core Introspection
**Goal**: Probe can discover, inspect, and interact with any QObject in the target application
**Depends on**: Phase 1
**Plans**: 7 plans

Plans:
- [x] 02-01: Object Registry with qtHookData hooks
- [x] 02-02: Hierarchical object IDs and tree serialization
- [x] 02-03: Meta Inspector for property/method/signal listing
- [x] 02-04: Property get/set and method invocation
- [x] 02-05: Signal monitoring with push notifications
- [x] 02-06: UI interaction (click, keyboard, screenshot, hit test)
- [x] 02-07: JSON-RPC integration for all introspection methods

**Completed:** 2026-01-30

### Phase 3: Native Mode
**Goal**: Complete Native Mode API surface ready for AI agents to use full Qt introspection
**Depends on**: Phase 2
**Plans**: 4 plans

Plans:
- [x] 03-01: Infrastructure: ErrorCodes, ResponseEnvelope, ObjectResolver, SymbolicNameMap
- [x] 03-02: NativeModeApi: all qt.* method registrations + Probe wiring
- [x] 03-03: Integration tests for complete Native Mode API
- [x] 03-04: Fix getTopLevelObjects to include QCoreApplication in search roots

**Completed:** 2026-01-31

### Phase 4: Computer Use Mode
**Goal**: AI agents can control Qt applications using screenshot and pixel coordinates
**Depends on**: Phase 2
**Plans**: 5 plans

Plans:
- [x] 04-01: KeyNameMapper, InputSimulator extensions, Screenshot extensions
- [x] 04-02: ComputerUseModeApi with 13 cu.* methods + Probe wiring
- [x] 04-03: Integration tests for complete Computer Use API
- [x] 04-04: Harden API init + legacy param backward compat
- [x] 04-05: Virtual cursor position tracking for cu.cursorPosition

**Completed:** 2026-01-31

### Phase 5: Chrome Mode
**Goal**: AI agents can control Qt applications using accessibility tree and numbered refs
**Depends on**: Phase 2
**Plans**: 4 plans

Plans:
- [x] 05-01: RoleMapper, ConsoleMessageCapture, AccessibilityTreeWalker infrastructure
- [x] 05-02: ChromeModeApi with all 8 chr.* methods + CMake + Probe wiring
- [x] 05-03: Integration tests for Chrome Mode API
- [x] 05-04: Fix chr.find ref map wipe + name fallback bugs

**Completed:** 2026-02-01

### Phase 6: Extended Introspection
**Goal**: Probe can inspect QML items and navigate QAbstractItemModel hierarchies
**Depends on**: Phase 2
**Plans**: 4 plans

Plans:
- [x] 06-01: QML Inspector infrastructure + QML-aware Object ID generation
- [x] 06-02: ModelNavigator utility class for model discovery and data access
- [x] 06-03: NativeModeApi extensions: qt.qml.* and qt.models.* methods
- [x] 06-04: Integration tests for Model/View and QML API

**Completed:** 2026-02-01

### Phase 7: Python Integration
**Goal**: Claude can control Qt applications through MCP server with all three API modes
**Depends on**: Phase 3, Phase 4, Phase 5
**Plans**: 3 plans

Plans:
- [x] 07-01: Package skeleton, ProbeConnection, server factory, CLI
- [x] 07-02: All tool definitions: Native (32), CU (13), Chrome (8)
- [x] 07-03: README with config snippets + unit tests

**Completed:** 2026-02-01

---

## Milestone Summary

**Key Decisions:**
- LD_PRELOAD (Linux) / DLL injection (Windows) — proven by GammaRay
- WebSocket transport with JSON-RPC 2.0 — standard, browser-compatible
- Three API modes (Native, CU, Chrome) — Claude already knows CU and Chrome APIs
- Python MCP server (not C++) — faster iteration, MCP SDK available in Python
- Hierarchical object IDs — human-readable, reflects actual Qt object tree
- InitOnce API instead of std::call_once — avoids TLS issues in injected DLLs
- Q_COREAPP_STARTUP_FUNCTION for auto-init — triggers probe when Qt starts
- Ephemeral refs for Chrome Mode — cleared on readPage, fresh assignment per walk
- Qt Quick as optional dependency — QTMCP_HAS_QML compile guard

**Issues Resolved:**
- Windows DLL pitfalls (CRT mismatch, TLS, DllMain) — minimal DllMain pattern
- NativeModeApi silent failure in DLL context — independent try/catch per API
- cu.cursorPosition reading OS cursor — virtual cursor tracking
- chr.find ref map wipe destroying previous refs — append instead of clear
- getTopLevelObjects missing QCoreApplication — added to search roots

**Issues Deferred:**
- macOS support (different injection approach required)
- Attach to running process (launch-only for MVP)
- Authentication for remote connections

**Technical Debt Incurred:**
- qt.names.save registered in probe but not exposed as Python MCP tool (not in requirements)

---

_For current project status, see .planning/ROADMAP.md_
